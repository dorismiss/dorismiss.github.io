webpackJsonp([10],{CSuf:function(o,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{form:{goods_name:"",cate_id:"",supplier_id:"",goods_price:"",market_price:"",goods_number:"",goods_sort:"",is_on_color:"1"},formats:[{color:"",price:"",smark_price:"",inventory:""}],options:[],optionsupplier:[],fileList:[],fileListpic:[],homefileList:[],dialogVisible:!1,dialogImageUrl:""}},mounted:function(){this.catelist(),this.supplierlist(),0!=this.$route.query.goods_id&&this.editgoods()},methods:{addformat:function(){this.formats.push({color:"",price:"",smark_price:"",inventory:""})},editgoods:function(){var o=this;this.$axios({method:"get",url:this.url()+"/index.php/goods/onegoods",params:{goods_id:o.$route.query.goods_id}}).then(function(e){console.log(e.data.data),o.form=e.data.data.goodsinfo;for(var t=0;t<e.data.data.goodsimg.length;t++)e.data.data.goodsimg[t].url=o.url()+e.data.data.goodsimg[t].url;o.fileList=e.data.data.goodsimg;for(t=0;t<e.data.data.goodsinfopic.length;t++)e.data.data.goodsinfopic[t].url=o.url()+e.data.data.goodsinfopic[t].url;o.fileListpic=e.data.data.goodsinfopic;for(t=0;t<e.data.data.goods_thumb.length;t++)e.data.data.goods_thumb[t].url=o.url()+e.data.data.goods_thumb[t].url;o.homefileList=e.data.data.goods_thumb,o.formats=e.data.data.goods_formats})},onSubmit:function(){var o=this;console.log(o.form),console.log(o.formats),console.log(o.homefileList),console.log(o.fileList),this.$axios({method:"post",url:this.url()+"/index.php/goods/ceshi",params:{data:o.form,goods_id:o.$route.query.goods_id,fileList:o.fileList,formats:o.formats,homefileList:o.homefileList,fileListpic:o.fileListpic}}).then(function(e){o.$router.push("/right"),console.log(e.data)})},catelist:function(){var o=this;this.$axios({method:"get",url:this.url()+"/index.php/cate/cate"}).then(function(e){o.options=e.data.data}).catch(function(o){console.log(o)})},supplierlist:function(){var o=this;this.$axios({method:"get",url:this.url()+"/index.php/supplier/supplier"}).then(function(e){o.optionsupplier=e.data.data}).catch(function(o){console.log(o)})},beforeRemove:function(o,e){this.$axios({method:"post",url:this.url()+"/index.php/goods-img/imgdel",params:{img_id:o.img_id}}).then(function(o){})},handlesuccess:function(o,e,t){0!=this.$route.query.goods_id&&this.$axios({method:"post",url:this.url()+"/index.php/goods-img/imgadd",params:{goods_id:this.$route.query.goods_id,img_url:o.data.url}}).then(function(o){}),e=o.data,this.fileList.push(e),console.log(this.fileList)},infopicsuccess:function(o,e,t){0!=this.$route.query.goods_id&&this.$axios({method:"post",url:this.url()+"/index.php/goods-info-pic/imgadd",params:{goods_id:this.$route.query.goods_id,img_url:o.data.url}}).then(function(o){}),e=o.data,this.fileListpic.push(e)},beforeRemovepic:function(o,e){this.$axios({method:"post",url:this.url()+"/index.php/goods-info-pic/imgdel",params:{pic_id:o.pic_id}}).then(function(o){})},homesuccess:function(o,e,t){0!=this.$route.query.goods_id&&this.$axios({method:"post",url:this.url()+"/index.php/goods/imgadd",params:{goods_id:this.$route.query.goods_id,goods_thumb:o.data.url}}).then(function(o){}),e=o.data,console.log(e),this.homefileList.push(e),console.log(this.homefileList)},beforeRemovehome:function(o,e){this.$axios({method:"post",url:this.url()+"/index.php/goods/imgdel",params:{goods_id:this.$route.query.goods_id}}).then(function(o){})}}},s={render:function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("el-main",[t("el-form",{ref:"form",attrs:{model:o.form,"label-width":"100px"}},[t("p",[o._v(o._s(o.$route.query.goods_id))]),o._v(" "),t("el-form-item",{attrs:{label:"商品名称"}},[t("el-input",{model:{value:o.form.goods_name,callback:function(e){o.$set(o.form,"goods_name",e)},expression:"form.goods_name"}})],1),o._v(" "),t("el-form-item",{attrs:{label:"所属分类"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:o.form.cate_id,callback:function(e){o.$set(o.form,"cate_id",e)},expression:"form.cate_id"}},o._l(o.options,function(o){return t("el-option",{key:o.cate_id,attrs:{label:o.cate_name,value:o.cate_id}})}),1)],1),o._v(" "),t("el-form-item",{attrs:{label:"选择供应商"}},[t("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:o.form.supplier_id,callback:function(e){o.$set(o.form,"supplier_id",e)},expression:"form.supplier_id"}},o._l(o.optionsupplier,function(o){return t("el-option",{key:o.supplier_id,attrs:{label:o.supplier_name,value:o.supplier_id}})}),1)],1),o._v(" "),t("el-form-item",{attrs:{label:"是否启用颜色"}},[t("el-radio",{attrs:{label:"0"},model:{value:o.form.is_on_color,callback:function(e){o.$set(o.form,"is_on_color",e)},expression:"form.is_on_color"}},[o._v("不启用")]),o._v(" "),t("el-radio",{attrs:{label:"1"},model:{value:o.form.is_on_color,callback:function(e){o.$set(o.form,"is_on_color",e)},expression:"form.is_on_color"}},[o._v("启用")])],1),o._v(" "),1==o.form.is_on_color?t("el-form-item",{attrs:{label:"启用规格颜色"}},[t("el-button",{attrs:{type:"primary"},on:{click:o.addformat}},[o._v("添加规格")]),o._v(" "),t("table",{staticStyle:{"border-collapse":"collapse",width:"80%"},attrs:{border:"1",bordercolor:"#999"}},[t("tbody",[t("tr",[t("td",[o._v("颜色")]),o._v(" "),t("td",[o._v("原价")]),o._v(" "),t("td",[o._v("商城价")]),o._v(" "),t("td",[o._v("库存")])]),o._v(" "),o._l(o.formats,function(e){return t("tr",{key:e.id},[t("td",[t("el-input",{model:{value:e.color,callback:function(t){o.$set(e,"color",t)},expression:"format.color"}})],1),o._v(" "),t("td",[t("el-input",{model:{value:e.smark_price,callback:function(t){o.$set(e,"smark_price",t)},expression:"format.smark_price"}})],1),o._v(" "),t("td",[t("el-input",{model:{value:e.price,callback:function(t){o.$set(e,"price",t)},expression:"format.price"}})],1),o._v(" "),t("td",[t("el-input",{model:{value:e.inventory,callback:function(t){o.$set(e,"inventory",t)},expression:"format.inventory"}})],1)])})],2)])],1):o._e(),o._v(" "),t("el-form-item",{attrs:{label:"默认规格"}},[t("table",{staticStyle:{"border-collapse":"collapse"},attrs:{border:"1",bordercolor:"#999"}},[t("tbody",[t("tr",[t("td",[o._v("原价")]),o._v(" "),t("td",[o._v("商城价")]),o._v(" "),t("td",[o._v("库存")])]),o._v(" "),t("tr",[t("td",[t("el-input",{model:{value:o.form.market_price,callback:function(e){o.$set(o.form,"market_price",e)},expression:"form.market_price"}})],1),o._v(" "),t("td",[t("el-input",{model:{value:o.form.goods_price,callback:function(e){o.$set(o.form,"goods_price",e)},expression:"form.goods_price"}})],1),o._v(" "),t("td",[t("el-input",{model:{value:o.form.goods_number,callback:function(e){o.$set(o.form,"goods_number",e)},expression:"form.goods_number"}})],1)])])])]),o._v(" "),t("el-form-item",{attrs:{label:"排序"}},[t("el-input",{model:{value:o.form.goods_sort,callback:function(e){o.$set(o.form,"goods_sort",e)},expression:"form.goods_sort"}})],1),o._v(" "),t("el-form-item",{attrs:{label:"首页缩略图"}},[t("el-upload",{attrs:{action:this.url()+"/index.php/upload/upload","list-type":"picture-card","on-success":o.homesuccess,limit:2,"file-list":o.homefileList,"before-remove":o.beforeRemovehome}},[t("i",{staticClass:"el-icon-plus"})]),o._v(" "),t("el-dialog",{attrs:{visible:o.dialogVisible},on:{"update:visible":function(e){o.dialogVisible=e}}},[t("img",{attrs:{width:"100%",src:o.dialogImageUrl,alt:""}})])],1),o._v(" "),t("el-form-item",{attrs:{label:"banner图"}},[t("el-upload",{attrs:{action:this.url()+"/index.php/upload/upload","list-type":"picture-card","on-success":o.handlesuccess,"file-list":o.fileList,"before-remove":o.beforeRemove}},[t("i",{staticClass:"el-icon-plus"})]),o._v(" "),t("el-dialog",{attrs:{visible:o.dialogVisible},on:{"update:visible":function(e){o.dialogVisible=e}}},[t("img",{attrs:{width:"100%",src:o.dialogImageUrl,alt:""}})])],1),o._v(" "),t("el-form-item",{attrs:{label:"详情图"}},[t("el-upload",{attrs:{action:this.url()+"/index.php/upload/upload","list-type":"picture-card","on-success":o.infopicsuccess,"file-list":o.fileListpic,"before-remove":o.beforeRemovepic}},[t("i",{staticClass:"el-icon-plus"})]),o._v(" "),t("el-dialog",{attrs:{visible:o.dialogVisible},on:{"update:visible":function(e){o.dialogVisible=e}}},[t("img",{attrs:{width:"100%",src:o.dialogImageUrl,alt:""}})])],1),o._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:o.onSubmit}},[o._v("立即创建")]),o._v(" "),t("el-button",[o._v("取消")])],1)],1)],1)},staticRenderFns:[]},l=t("VU/8")(i,s,!1,null,null,null);e.default=l.exports}});
//# sourceMappingURL=10.d7f09e5c656bf7820a4d.js.map